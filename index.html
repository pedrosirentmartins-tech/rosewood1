<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Rosewood Medical Center</title>

<!-- Firebase SDK (correto) -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
  // Configuração do Firebase
  var firebaseConfig = {
    apiKey: "AIzaSyBRFlVvCNQRj9QEQcfcTPWJVletd34vu2g",
    authDomain: "rosewood-a17a5.firebaseapp.com",
    databaseURL: "https://rosewood-a17a5-default-rtdb.firebaseio.com",
    projectId: "rosewood-a17a5",
    storageBucket: "rosewood-a17a5.firebasestorage.app",
    messagingSenderId: "20548352872",
    appId: "1:20548352872:web:c62d40e9dea3efbb80b4dd"
  };

  // Inicializar Firebase
  firebase.initializeApp(firebaseConfig);

  var database = firebase.database();
</script>

<style>
body {font-family: Arial; background:#f5f5f5; margin:0}
.container {display:flex; padding:30px; gap:20px}
.card {background:#fff; padding:20px; border-radius:10px; width:50%}
input, select, textarea {width:100%; padding:8px; margin-bottom:10px}
button {padding:8px 12px; border:none; cursor:pointer}
.save {background:#ff2f92;color:white}
.delete {background:red;color:white}
.item {border:1px solid #ccc; padding:10px;margin-bottom:10px}
</style>
</head>

<body>

<div class="container">

<div class="card">
<h2>Novo cadastro</h2>
<input id="nome" placeholder="Nome">
<input id="cpf" placeholder="CPF">
<input id="idade" placeholder="Idade">
<input id="altura" placeholder="Altura">
<select id="sangue">
  <option value="">Tipo sanguíneo</option>
  <option>A+</option><option>A-</option>
  <option>B+</option><option>B-</option>
  <option>O+</option><option>O-</option>
  <option>AB+</option><option>AB-</option>
</select>
<textarea id="obs" placeholder="Observações"></textarea>
<button class="save" onclick="salvar()">Salvar</button>
</div>

<div class="card">
<h2>Banco de dados</h2>
<input oninput="buscar(this.value)" placeholder="Buscar por nome ou CPF">
<div id="lista"></div>
</div>

</div>

<script>
function salvar(){
  let dados = {
    nome: nome.value,
    cpf: cpf.value,
    idade: idade.value,
    altura: altura.value,
    sangue: sangue.value,
    obs: obs.value
  };

  database.ref("cadastros").push(dados);

  nome.value=""; cpf.value=""; idade.value=""; altura.value=""; sangue.value=""; obs.value="";
}

database.ref("cadastros").on("value", function(snapshot){
  let html="";
  snapshot.forEach(function(item){
    let d = item.val();
    html += `
      <div class="item">
        <b>${d.nome}</b><br>
        CPF: ${d.cpf} <br>
        Idade: ${d.idade} | Altura: ${d.altura} <br>
        Sangue: ${d.sangue}<br>
        <button class="delete" onclick="apagar('${item.key}')">Apagar</button>
      </div>
    `;
  });
  lista.innerHTML = html;
});

function apagar(id){
  database.ref("cadastros/"+id).remove();
}

function buscar(txt){
  txt = txt.toLowerCase();
  let itens = document.querySelectorAll(".item");
  itens.forEach(i=>{
    i.style.display = i.innerText.toLowerCase().includes(txt) ? "block" : "none";
  });
}
</script>

</body>
</html>
